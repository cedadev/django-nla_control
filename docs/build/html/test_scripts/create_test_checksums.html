

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="gb" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="gb" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>create_test_checksums.py &mdash; Near-line Archive 0.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="create_test_data.py" href="create_test_data.html" />
    <link rel="prev" title="Test Scripts" href="test_scripts.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Near-line Archive
          

          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">NLA User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models/models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts/scripts.html">Scripts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="test_scripts.html">Test Scripts</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">create_test_checksums.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_test_data.html">create_test_data.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="fix_restore_disk.html">fix_restore_disk.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="move_files_to_fake_tape.html">move_files_to_fake_tape.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="redo_verify_requests.html">redo_verify_requests.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest_api/rest_api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nla_client/nla_client.html">Near Line Archive client</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Near-line Archive</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="test_scripts.html">Test Scripts</a> &raquo;</li>
        
      <li>create_test_checksums.py</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/test_scripts/create_test_checksums.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-nla_control.scripts.create_test_checksums">
<span id="create-test-checksums-py"></span><h1>create_test_checksums.py<a class="headerlink" href="#module-nla_control.scripts.create_test_checksums" title="Permalink to this headline">¶</a></h1>
<p>The NLA test system copies a number of files to an area of disk, which it then treats as an emulated version of
the StorageD system.  Files on StorageD have checksums associated with them that are created during the archive to
tape process: files have their checksum calculated, are archived to tape, restored from tape (into a different area)
and the checksum calculated again.  If the checksums match then the file on tape is taken to be a legitimate copy and
the file on disk can be deleted.</p>
<p>The NLA system uses the output from this checksumming process to determine if a file that has been marked for archive
has been successfully stored on tape.  For the test system these checksum logs do not exist.  This script creates
those checksum logs in the test system.  They have the same format as the logs produced by StorageD when archiving to
tape.</p>
<dl class="function">
<dt id="nla_control.scripts.create_test_checksums.create_checksum_files">
<code class="sig-prename descclassname">nla_control.scripts.create_test_checksums.</code><code class="sig-name descname">create_checksum_files</code><span class="sig-paren">(</span><em class="sig-param">calc_checksum_list</em>, <em class="sig-param">CHKSUMSDIR</em><span class="sig-paren">)</span><a class="headerlink" href="#nla_control.scripts.create_test_checksums.create_checksum_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a file containing the checksums.  This is used by the test system as there are no
checksums from the backup process.  We could copy the checksum files over but the file
paths in the checksum files would be incorrect - so easier to just recompute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>calc_checksum_list</strong> (<em>List</em><em>[</em><em>Tuple</em><em>(</em><em>string</em><em>,</em><em>string</em><em>)</em><em>]</em>) -- List of files to calculate checksums for.  Each Tuple
in the list contains <code class="docutils literal notranslate"><span class="pre">(spot_name,</span> <span class="pre">spot_path)</span></code></p></li>
<li><p><strong>CHKSUMDIR</strong> (<em>string</em>) -- Location of the check sum logs - i.e. the output directory</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="nla_control.scripts.create_test_checksums.run">
<code class="sig-prename descclassname">nla_control.scripts.create_test_checksums.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nla_control.scripts.create_test_checksums.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Function picked up by django-extensions. Calculate the checksums for each file that has been added to the
NLA test system.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="create_test_data.html" class="btn btn-neutral float-right" title="create_test_data.py" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="test_scripts.html" class="btn btn-neutral float-left" title="Test Scripts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Centre for Environmental Data Analysis, Science and Technologies Facilities Council

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>